{"version":3,"sources":["uni-app:///main.js","webpack:////Users/ChenZhiluo/Desktop/msc/scenic/wx_front/pages/bought/bought.vue?a257","webpack:////Users/ChenZhiluo/Desktop/msc/scenic/wx_front/pages/bought/bought.vue?db39","webpack:////Users/ChenZhiluo/Desktop/msc/scenic/wx_front/pages/bought/bought.vue?bef3","webpack:////Users/ChenZhiluo/Desktop/msc/scenic/wx_front/pages/bought/bought.vue?d8db","uni-app:///pages/bought/bought.vue","webpack:////Users/ChenZhiluo/Desktop/msc/scenic/wx_front/pages/bought/bought.vue?ade5","webpack:////Users/ChenZhiluo/Desktop/msc/scenic/wx_front/pages/bought/bought.vue?9da6"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","NavBar","data","global_url","tickets","currentTab","tabStatuses","status_choices","pendingCount","mounted","methods","switchTab","fetchTickets","url","uni","method","success","item","status_text","title","icon","fail","console","fetchTicketDetails","ticket","attraction"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,eAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAmH;AACnH;AAC0D;AACL;AACa;;;AAGlE;AACmN;AACnN,gBAAgB,iNAAU;AAC1B,EAAE,4EAAM;AACR,EAAE,iFAAM;AACR,EAAE,0FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,qFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,gQAEN;AACP,KAAK;AACL;AACA,aAAa,uPAEN;AACP,KAAK;AACL;AACA,aAAa,8OAEN;AACP,KAAK;AACL;AACA,aAAa,qRAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC3DA;AAAA;AAAA;AAAA;AAAm1B,CAAgB,oyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;eCmJv2B;EACAC;IACAC;EACA;EACAC;IACA;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;QAAA;QACA;QAAA;QACA;QAAA;QACA;MACA;;MACAC;QAAA;QACA;QACA;QACA;QACA;MACA;MACAC;IACA;EACA;EACAC;IACA;EACA;EACAC;IACAC;MACA;MACA;MACA;IACA;IACAC;MAAA;MACA;MACA;QACAC;MACA;;MACAC;QACAD;QACAE;QACAC;UACA;YACA;cAAA,uCACAC;gBACAC;cAAA;YAAA,CACA;YACA;YACA;cACA;gBAAA;cAAA;YACA;UACA;YACA;YACAJ;cACAK;cACAC;YACA;UACA;QACA;QACAC;UAAA;UACAC;UACAR;YACAK;YACAC;UACA;QACA;MACA;IACA;IACAG;MAAA;MACA;QACAT;UACAD;UAAA;UACAE;UACAC;YACA;cACA,mEACAQ;gBACAC;cAAA,GACA;YACA;UACA;;UACAJ;YACAC;UACA;QACA;MACA;MACAA;IACA;EAEA;AACA;AAAA,2B;;;;;;;;;;;;;AC5OA;AAAA;AAAA;AAAA;AAAssC,CAAgB,imCAAG,EAAC,C;;;;;;;;;;;ACA1tC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/bought/bought.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/bought/bought.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./bought.vue?vue&type=template&id=ecef6134&\"\nvar renderjs\nimport script from \"./bought.vue?vue&type=script&lang=js&\"\nexport * from \"./bought.vue?vue&type=script&lang=js&\"\nimport style0 from \"./bought.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/bought/bought.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./bought.vue?vue&type=template&id=ecef6134&\"","var components\ntry {\n  components = {\n    uniBadge: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-badge/components/uni-badge/uni-badge\" */ \"@/uni_modules/uni-badge/components/uni-badge/uni-badge.vue\"\n      )\n    },\n    uniCard: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-card/components/uni-card/uni-card\" */ \"@/uni_modules/uni-card/components/uni-card/uni-card.vue\"\n      )\n    },\n    uniTag: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-tag/components/uni-tag/uni-tag\" */ \"@/uni_modules/uni-tag/components/uni-tag/uni-tag.vue\"\n      )\n    },\n    uLine: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-line/u-line\" */ \"uview-ui/components/u-line/u-line.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event, item) {\n      var _temp = arguments[arguments.length - 1].currentTarget.dataset,\n        _temp2 = _temp.eventParams || _temp[\"event-params\"],\n        item = _temp2.item\n      var _temp, _temp2\n      item.status === 0\n        ? _vm.navto_pay(item.ticket_id)\n        : _vm.navto_detail(item.ticket_id)\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./bought.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./bought.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<NavBar>\r\n\t\t\t<template slot=\"title\">\r\n\t\t\t\t<view>我的门票</view>\r\n\t\t\t</template>\r\n\t\t</NavBar>\r\n\t\t<view class=\"tabs-container\">\r\n\t\t\t<view class=\"tabs\">\r\n\t\t\t\t<view class=\"tab\" :class=\"{ active: currentTab === 'all' }\" @click=\"switchTab('all')\">全部</view>\r\n\t\t\t\t<view class=\"tab\" :class=\"{ active: currentTab === 'pending' }\" @click=\"switchTab('pending')\">\r\n\t\t\t\t\t<text>待支付</text>\r\n\t\t\t\t\t<uni-badge v-if=\"pendingCount > 0\" :text=\"pendingCount\" absolute=\"rightTop\" :offset=\"[-5, -10]\"></uni-badge>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"tab\" :class=\"{ active: currentTab === 'paid' }\" @click=\"switchTab('paid')\">已支付</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"tab-content\">\r\n\t\t\t\t<view v-if=\"currentTab === 'all'\">\r\n\t\t\t\t\t<uni-card v-for=\"item in tickets\">\r\n\t\t\t\t\t\t<template v-slot:title>\r\n\t\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t\t<view class=\"info\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"image-info\">\r\n\t\t\t\t\t\t\t\t\t\t<image :src=\"global_url+item.attraction.image\" mode=\"aspectFill\" />\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"main-info junyun\">\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"name-info junyun\">\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"name-container\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle=\"color: black;\">{{ item.attraction.attraction_name }}门票</text>\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"count-container\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<text style=\"color: black;\">x{{ item.ticket_count }}</text>\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"other-info junyun\">\r\n\t\t\t\t\t\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\t\t\t\t\t\tstyle=\"font-size: 14px; margin-left: 3px; color: grey;\">使用日期：{{ item.ticket_date }}</text>\r\n\t\t\t\t\t\t\t\t\t\t\t<uni-tag class=\"status\" :inverted=\"true\" :circle=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t:text=\"item.status_text\" :type=\"item.status_text === '待支付' ? 'error' :   \r\n\t\t\t\t\t\t\t\t\t\t\t\titem.status_text === '已支付' ? 'success' :   \r\n\t\t\t\t\t\t\t\t\t\t\t\titem.status_text === '已完成' ? 'primary' :   \r\n\t\t\t\t\t\t\t\t\t\t\t\titem.status_text === '已取消' ? 'default' :   \r\n\t\t\t\t\t\t\t\t\t\t\t\t'default'\" size=\"mini\" />\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"nav kaoyou\">\n\t\t\t\t\t\t\t\t\t\t    <uni-tag :text=\"item.status === 0 ? '前往支付' : '查看详情'\" type=\"warning\" style=\"margin-left: 15px;\" @click=\"item.status === 0 ? navto_pay(item.ticket_id) : navto_detail(item.ticket_id)\"></uni-tag>\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<u-line color=\"lightgrey\" />\r\n\t\t\t\t\t\t<u-line margin=\"3px 0px\" color=\"white\" />\r\n\t\t\t\t\t\t<text>购买好门票后请提前安排好行程，避免门票失效喔～</text>\r\n\t\t\t\t\t</uni-card>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view v-if=\"currentTab === 'pending'\">\r\n\t\t\t\t\t<uni-card v-for=\"item in tickets\">\r\n\t\t\t\t\t\t<template v-slot:title>\r\n\t\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t\t<view class=\"info\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"image-info\">\r\n\t\t\t\t\t\t\t\t\t\t<image :src=\"global_url+item.attraction.image\" mode=\"aspectFill\" />\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"main-info junyun\">\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"name-info junyun\">\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"name-container\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle=\"color: black;\">{{ item.attraction.attraction_name }}门票</text>\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"count-container\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<text style=\"color: black;\">x{{ item.ticket_count }}</text>\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"other-info junyun\">\r\n\t\t\t\t\t\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\t\t\t\t\t\tstyle=\"font-size: 14px; margin-left: 3px; color: grey;\">使用日期：{{ item.ticket_date }}</text>\r\n\t\t\t\t\t\t\t\t\t\t\t<uni-tag class=\"status\" :inverted=\"true\" :circle=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t:text=\"item.status_text\" :type=\"item.status_text === '待支付' ? 'error' :   \r\n\t\t\t\t\t\t\t\t\t\t\t\titem.status_text === '已支付' ? 'success' :   \r\n\t\t\t\t\t\t\t\t\t\t\t\titem.status_text === '已完成' ? 'primary' :   \r\n\t\t\t\t\t\t\t\t\t\t\t\titem.status_text === '已取消' ? 'default' :   \r\n\t\t\t\t\t\t\t\t\t\t\t\t'default'\" size=\"mini\" />\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"nav kaoyou\">\r\n\t\t\t\t\t\t\t\t\t\t\t<uni-tag text=\"前往支付\" type=\"warning\" style=\"margin-left: 15px;\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t@click=\"navto_pay(item.ticket_id)\"></uni-tag>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<u-line color=\"lightgrey\" />\r\n\t\t\t\t\t\t<u-line margin=\"3px 0px\" color=\"white\" />\r\n\t\t\t\t\t\t<text>购买好门票后请提前安排好行程，避免门票失效喔～</text>\r\n\t\t\t\t\t</uni-card>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view v-if=\"currentTab === 'paid'\">\r\n\t\t\t\t\t<uni-card v-for=\"item in tickets\">\r\n\t\t\t\t\t\t<template v-slot:title>\r\n\t\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t\t<view class=\"info\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"image-info\">\r\n\t\t\t\t\t\t\t\t\t\t<image :src=\"global_url+item.attraction.image\" mode=\"aspectFill\" />\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"main-info junyun\">\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"name-info junyun\">\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"name-container\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle=\"color: black;\">{{ item.attraction.attraction_name }}门票</text>\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"count-container\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<text style=\"color: black;\">x{{ item.ticket_count }}</text>\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"other-info junyun\">\r\n\t\t\t\t\t\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\t\t\t\t\t\tstyle=\"font-size: 14px; margin-left: 3px; color: grey;\">使用日期：{{ item.ticket_date }}</text>\r\n\t\t\t\t\t\t\t\t\t\t\t<uni-tag class=\"status\" :inverted=\"true\" :circle=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t:text=\"item.status_text\" :type=\"item.status_text === '待支付' ? 'error' :   \r\n\t\t\t\t\t\t\t\t\t\t\t\titem.status_text === '已支付' ? 'success' :   \r\n\t\t\t\t\t\t\t\t\t\t\t\titem.status_text === '已完成' ? 'primary' :   \r\n\t\t\t\t\t\t\t\t\t\t\t\titem.status_text === '已取消' ? 'default' :   \r\n\t\t\t\t\t\t\t\t\t\t\t\t'default'\" size=\"mini\" />\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"nav kaoyou\">\r\n\t\t\t\t\t\t\t\t\t\t\t<uni-tag text=\"查看详情\" type=\"warning\" style=\"margin-left: 15px;\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t@click=\"navto_detail(item.attraction_id)\"></uni-tag>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<u-line color=\"lightgrey\" />\r\n\t\t\t\t\t\t<u-line margin=\"3px 0px\" color=\"white\" />\r\n\t\t\t\t\t\t<text>购买好门票后请提前安排好行程，避免门票失效喔～</text>\r\n\t\t\t\t\t</uni-card>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport NavBar from \"../../components/NavBar.vue\";\r\n\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tNavBar,\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tglobal_url: getApp().globalData.resourceURL,\r\n\t\t\t\ttickets: [], // 存储门票数据的数组  \r\n\t\t\t\tcurrentTab: 'all', // 当前选中的标签  \r\n\t\t\t\ttabStatuses: { // tab 对应的数字标识  \r\n\t\t\t\t\t'all': null, // 'all' 标识对应所有门票数据，所以这里用 null  \r\n\t\t\t\t\t'pending': 0, // 'pending' 标识对应待支付门票数据  \r\n\t\t\t\t\t'paid': 1 // 'paid' 标识对应已支付门票数据  \r\n\t\t\t\t},\r\n\t\t\t\tstatus_choices: { // 定义status的映射关系\r\n\t\t\t\t\t0: \"待支付\",\r\n\t\t\t\t\t1: \"已支付\",\r\n\t\t\t\t\t2: \"已完成\",\r\n\t\t\t\t\t3: \"已取消\"\r\n\t\t\t\t},\r\n\t\t\t\tpendingCount: 0,\r\n\t\t\t};\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.fetchTickets(this.tabStatuses[this.currentTab]);\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tswitchTab(tab) {\r\n\t\t\t\tthis.currentTab = tab; // 更新当前选中的标签  \r\n\t\t\t\tconst status = this.tabStatuses[tab]; // 获取对应 tab 的状态标识  \r\n\t\t\t\tthis.fetchTickets(status); // 加载对应状态的门票数据  \r\n\t\t\t},\r\n\t\t\tfetchTickets(status) {\r\n\t\t\t\tlet url = 'http://localhost:8000/ticket';\r\n\t\t\t\tif (status !== null) {\r\n\t\t\t\t\turl += '?status=' + status; // 根据传入的 status 参数添加查询条件  \r\n\t\t\t\t}\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: url,\r\n\t\t\t\t\tmethod: 'GET',\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tif (res.data && res.data.length > 0) {\r\n\t\t\t\t\t\t\tthis.tickets = res.data.map(item => ({\r\n\t\t\t\t\t\t\t\t...item,\r\n\t\t\t\t\t\t\t\tstatus_text: this.status_choices[item.status]\r\n\t\t\t\t\t\t\t}));\r\n\t\t\t\t\t\t\tthis.fetchTicketDetails();\n\t\t\t\t\t\t\tif(status != 1) {\n\t\t\t\t\t\t\t\tthis.pendingCount = this.tickets.filter(item => item.status === 0).length;\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.tickets = [];\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '暂无数据',\r\n\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (error) => { // 注意这里使用fail代替catch，因为uni.request使用的是fail来处理错误  \r\n\t\t\t\t\t\tconsole.error(error);\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '加载失败',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tfetchTicketDetails() {\r\n\t\t\t\tthis.tickets.forEach((ticket, index) => {\r\n\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\turl: `http://localhost:8000/ticket/${ticket.ticket_id}`, // 替换为实际的后端 URL\r\n\t\t\t\t\t\tmethod: 'GET',\r\n\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\tif (res.data) {\r\n\t\t\t\t\t\t\t\tthis.$set(this.tickets, index, {\r\n\t\t\t\t\t\t\t\t\t...ticket,\r\n\t\t\t\t\t\t\t\t\tattraction: res.data.attraction\r\n\t\t\t\t\t\t\t\t}); // 将景点数据添加到对象中\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\t\tconsole.error('Failed to fetch details for ticket:', err);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\tconsole.log(this.tickets);\r\n\t\t\t},\r\n\r\n\t\t},\r\n\t};\r\n</script>\r\n\r\n<style>\r\n\t.tabs-container {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t}\r\n\r\n\t.tabs {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\t/* 使tabs均匀分布 */\r\n\t\talign-items: center;\r\n\t\tbackground-color: #fff;\r\n\t\t/* 可以设置背景色 */\r\n\t\tpadding: 10px 0;\r\n\t\t/* 上下内边距 */\r\n\t}\r\n\r\n\t.tab {\r\n\t\tflex: 1;\r\n\t\t/* 使每个tab占据等量的空间 */\r\n\t\ttext-align: center;\r\n\t\t/* 文字居中 */\r\n\t\tpadding: 10px 0;\r\n\t\t/* 上下内边距 */\r\n\t\tcursor: pointer;\r\n\t\tfont-size: 16px;\r\n\t\t/* 字体大小 */\r\n\t}\r\n\r\n\t.tab.active {\r\n\t\tcolor: #007aff;\r\n\t\t/* 选中时的文字颜色 */\r\n\t\tborder-bottom: 2px solid #007aff;\r\n\t\t/* 选中时的底部边框 */\r\n\t}\r\n\r\n\t.tab-content {\r\n\t\tpadding: 0 10px;\r\n\t}\r\n\r\n\t.info {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tmargin-top: 10px;\r\n\t}\r\n\r\n\t.status-info {\r\n\t\tmargin: 5px 0;\r\n\t}\r\n\r\n\t.image-info image {\r\n\t\twidth: 90px;\r\n\t\theight: 90px;\r\n\t}\r\n\r\n\t.main-info {\r\n\t\tflex-direction: column;\r\n\t\t/* 子元素垂直排列 */\r\n\t\tmargin: 0 10px;\r\n\t\twidth: 320px;\r\n\t}\r\n\r\n\t.name-info {\r\n\t\tmargin-bottom: 5px;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.name-info text {\r\n\t\tmargin-right: 10px;\r\n\t}\r\n\r\n\t.count-container {\r\n\t\t/* 这里也可以添加其他样式，比如字体大小、边距等 */\r\n\t\ttext-align: right;\r\n\t\t/* 虽然在微信小程序中这个属性可能不生效，但你可以保留它作为占位符 */\r\n\t}\r\n\r\n\t.nav {\r\n\t\twidth: 100%;\r\n\t\tmargin-top: 10px;\r\n\t}\r\n</style>\n","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./bought.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./bought.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1744710971561\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}