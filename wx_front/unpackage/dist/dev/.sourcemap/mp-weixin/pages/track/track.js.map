{"version":3,"sources":["uni-app:///main.js","webpack:////Users/ChenZhiluo/Desktop/msc/scenic/wx_front/pages/track/track.vue?590c","webpack:////Users/ChenZhiluo/Desktop/msc/scenic/wx_front/pages/track/track.vue?fb17","webpack:////Users/ChenZhiluo/Desktop/msc/scenic/wx_front/pages/track/track.vue?4da4","webpack:////Users/ChenZhiluo/Desktop/msc/scenic/wx_front/pages/track/track.vue?242f","uni-app:///pages/track/track.vue","webpack:////Users/ChenZhiluo/Desktop/msc/scenic/wx_front/pages/track/track.vue?3db2","webpack:////Users/ChenZhiluo/Desktop/msc/scenic/wx_front/pages/track/track.vue?07f5"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","NavBar","data","scenics","activeScenicId","selectedScenic","markers","polyline","showInfo","selectedAttraction","selectedMarker","rec_num","rec_date","rec_attraction","pattern","color","backgroundColor","selectedColor","buttonColor","iconColor","canvasWidth","canvasHeight","userInfo","isLoggedIn","noFootprintMessage","computed","polylineStyle","width","dottedLine","borderWidth","borderColor","markersWithCallout","marker","customCallout","display","textAlign","showCallout","mounted","onShow","console","methods","checkLoginStatus","app","showToastMessage","uni","title","icon","duration","clearFootprintData","getScenics","url","method","success","fail","setActiveScenicId","selectScenic","updateMarkersAndPolylines","userId","updateRecNum","toLocaleDateString","updateRecDateAndAttraction","formatDate","getStartTime","getStartDate","getEndTime","getEndDate","handleMarkerTap","navto_detail","navigateToNavigationPage","shareRoute","setTimeout","createShareImage","ctx","src","drawStatsBox","roundRect","saveCanvasToImage","canvasId","filePath","openShareMenu","path","handleFootprintResponse","id","longitude","latitude","name","attraction_id","check_in_time","height","iconPath","points","arrowLine","handleRequestFail"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,cAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;AACa;;;AAGjE;AACmN;AACnN,gBAAgB,iNAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,sTAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC3DA;AAAA;AAAA;AAAA;AAAk1B,CAAgB,myBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;eCkIt2B;EACAC;IACAC;EACA;EACAC;IACA;MACAC;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MACAC;MACAC;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;IACA;EACA;;EACAC;IACAC;MACA;MAEA,wCACA;QACAX;QACAY;QACAC;QACAC;QACAC;MAAA,GACA;IACA;IACAC;MACA;MACA;QAAA,uCACAC;UACAC;YACAC;YAAA;YACAC;YACAN;YACAC;UACA;UACAM;QAAA;MAAA,CACA;IACA;EACA;EACAC;IACA;IACA;EACA;EACAC;IACA;IACA;IACAC;IACA;;IAEA;IACA;MACA;IACA;EACA;EACAC;IACA;IACAC;MACA;MACA;;MAEA;MACA;MACAF;MAEA;QACA;QACA;QACAA;QACA;MACA;;MAEA;MACA;QACA;QACAA;QAEA;UACA;UACA;UACAA;;UAEA;UACA;YACAG;YACAH;UACA;YACAA;UACA;QACA;UACA;UACA;UACA;UACAA;UACA;QACA;MACA;QACAA;QACA;QACA;QACA;QACA;MACA;IACA;IACA;IACAI;MACAC;QACAC;QACAC;QACAC;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IACA;IACAC;MAAA;MACAL;QACAM;QACAC;QACAC;UACA;YACA;YACA;YACA;cACA;cACA;YACA;UACA;YACAb;UACA;QACA;QACAc;UACAd;QACA;MACA;IACA;IACAe;MACA;MACA;IACA;IACA;IACAC;MACA;QAAA;MAAA;MACA;MACA;IACA;IACAC;MAAA;MACA;MACA;;MAEA;MACA;QACA;QACAjB;QACA;MACA;;MAEA;MACA;QACAA;QACA;QACA;MACA;MAEA;;MAEA;MACA;MACA;QACAkB;MACA;QACAA;MACA;QACAA;MACA;QACAA;MACA;MAEAlB;MACAA;;MAEA;MACA;QACAkB;QACAlB;MACA;;MAEA;MACA;QACAA;QACA;QACA;MACA;;MAEA;MACAK;QACAC;MACA;;MAEA;MACAD;QACAM;QACAC;QACAC;UACA;UACAR;UACA;QACA;QACAS;MACA;IACA;IACAK;MACA;QAAA,yCACAC;MAAA;MACA;IACA;IACAC;MACA;QACA;QACA;QACA;MACA;MAEA;MACA;MACA;MACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;MACA;MACA;MACA;IACA;IACAC;MACA;MACA;MACA;MACA;IACA;IACAC;MACA;MACA;MACA;MACA;IACA;IACAC;MACA;MACA;MACA;MACA;IACA;IACAC;MAAA;MACA;MACA;QAAA;MAAA;MACA;MACA;MACAtB;QACAM;QACAC;QACAC;UACA;YACA;YACA;UACA;YACAb;UACA;QACA;QACAc;UACAd;QACA;MACA;IACA;IACA4B;MACA5B;MACAK;QACAM;MACA;IACA;IACAkB;MACA;MACA7B;MACA;IACA;IAEA;IACA8B;MAAA;MACAzB;QACAC;MACA;MACAyB;QACA;MACA;IACA;IAEA;IACAC;MAAA;MACA;MACA;MACA;;MAEA;MACAC;MACAA;;MAEA;MACAA;MACAA;MACAA;MACAA;;MAEA;MACAA;MACAA;MACAA;;MAEA;MACA;MACA;MACA;MACA;QAAA;MAAA;MACA;QAAA;MAAA;MAEAjC;MACAA;MACAA;MACAA;MACAA;;MAEA;MACA;MACA;MACA;MAEAA;;MAEA;MACAK;QACAC;MACA;MAEAD;QACA6B;QACArB;UACA;UACAoB;;UAEA;UACA;;UAEA;UACAA;UACAA;UACAA;UACAA;;UAEA;UACAA;YACAF;cACA;YACA;UACA;QACA;QACAjB;UACAd;UACAK;;UAEA;UACAA;YACAC;YACAC;YACAC;UACA;;UAEA;UACA;UACAH;YACA6B;YACArB;cACA;cACAoB;;cAEA;cACA;;cAEA;cACAA;cACAA;cACAA;cACAA;;cAEA;cACAA;gBACAF;kBACA;gBACA;cACA;YACA;YACAjB;cACAd;cACAK;cACAA;gBACAC;gBACAC;cACA;YACA;UACA;QACA;MACA;IACA;IAEA;IACA4B;MACA;MACAF;MACAA;MACA;MACAA;MACAA;;MAEA;MACAA;MACAA;MACAA;MACAA;;MAEA;MACA;;MAEA;MACAA;MACAA;MACAA;MACAA;MAEAA;MACAA;MACAA;;MAEA;MACAA;MACAA;MACAA;MACAA;MACAA;;MAEA;MACAA;MACAA;MACAA;MACAA;MAEAA;MACAA;MACAA;;MAEA;MACAA;MACAA;MACAA;MACAA;MACAA;;MAEA;MACAA;MACAA;MACAA;MACA;MACA,sDACA;MACAA;MAEAA;MACAA;MACAA;IACA;IAEA;IACAG;MACAH;MACAA;MACAA;MACAA;MACAA;MACAA;MACAA;MACAA;MACAA;MACAA;MACAA;IACA;IAEA;IACAI;MAAA;MACAhC;QACAiC;QACAzB;UACAR;UACA;UACAA;YACAkC;YACA1B;cACA;YACA;YACAC;cACAd;cACAK;gBACAC;gBACAC;cACA;YACA;UACA;QACA;QACAO;UACAT;UACAL;UACAK;YACAC;YACAC;UACA;QACA;MACA;IACA;IAEA;IACAiC;MAEAnC;QACAoC;QACA5B;UACAR;YACAC;YACAC;UACA;QACA;QACAO;UACAd;UACAK;YACAC;YACAC;UACA;QACA;MACA;IAUA;IAEA;IACAmC;MACA;QACA;QACA1C;QAEA;UACA;UACA;YAAA;cACA2C;cACAC;cACAC;cACAC;cACAC;cACAC;cACA5D;cAAA;cACA6D;cAAA;cACAC;YACA;UAAA;;UAEA;UACA,yEACA;YAAA;UAAA,EACA;UACA;YAAA;cACAN;cACAC;YACA;UAAA;UAEA;YACAM;YACA3E;YACA4E;YACAhE;YACAC;UACA;;UAEA;UACA;UACA;;UAEA;UACA;QACA;UACA;UACA;QACA;MACA;QACA;QACAW;QACA;MACA;IACA;IAEA;IACAqD;MACA;MACAhD;MAEAL;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AC7wBA;AAAA;AAAA;AAAA;AAAqsC,CAAgB,gmCAAG,EAAC,C;;;;;;;;;;;ACAztC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/track/track.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/track/track.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./track.vue?vue&type=template&id=2969281e&\"\nvar renderjs\nimport script from \"./track.vue?vue&type=script&lang=js&\"\nexport * from \"./track.vue?vue&type=script&lang=js&\"\nimport style0 from \"./track.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/track/track.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./track.vue?vue&type=template&id=2969281e&\"","var components\ntry {\n  components = {\n    uniIcons: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-icons/components/uni-icons/uni-icons\" */ \"@/uni_modules/uni-icons/components/uni-icons/uni-icons.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var m0 = _vm.formatDate(_vm.rec_date)\n  var g0 = _vm.markers.length\n  var g1 = _vm.markers.length\n  var m1 = g1 > 0 ? _vm.getStartTime() : null\n  var m2 = g1 > 0 ? _vm.getStartDate() : null\n  var m3 = g1 > 0 ? _vm.getEndTime() : null\n  var m4 = g1 > 0 ? _vm.getEndDate() : null\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      _vm.showInfo = false\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        m0: m0,\n        g0: g0,\n        g1: g1,\n        m1: m1,\n        m2: m2,\n        m3: m3,\n        m4: m4,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./track.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./track.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"track-page\">\r\n\t\t<NavBar>\r\n\t\t\t<template slot=\"title\">\r\n\t\t\t\t<view>历史足迹</view>\r\n\t\t\t</template>\r\n\t\t</NavBar>\r\n\t\t\r\n\t\t<!-- 景区选择栏 -->\r\n\t\t<scroll-view :scroll-x=\"true\">\r\n\t\t\t<view class=\"scenic-tabs\">\r\n\t\t\t\t<view v-for=\"item in scenics\" :key=\"item.scenic_id\" @click=\"setActiveScenicId(item.scenic_id)\"\r\n\t\t\t\t\t:class=\"{ 'scenic-tab': true, 'scenic-tab-active': item.scenic_id == activeScenicId }\">\r\n\t\t\t\t\t<view class=\"scenic-image-container\">\r\n\t\t\t\t\t\t<image :src=\"item.image\" mode=\"aspectFill\" class=\"scenic-image\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"scenic-name\">{{item.scenic_name}}</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</scroll-view>\r\n\t\t\r\n\t\t<!-- 行程统计卡片 -->\r\n\t\t<view class=\"stats-card\">\r\n\t\t\t<view class=\"stats-header\">\r\n\t\t\t\t<uni-icons type=\"calendar\" size=\"22\" color=\"#3bcb98\"></uni-icons>\r\n\t\t\t\t<text class=\"stats-title\">行程概览</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"stats-content\">\r\n\t\t\t\t<view class=\"stats-item\">\r\n\t\t\t\t\t<text class=\"stats-value\">{{rec_num}}</text>\r\n\t\t\t\t\t<text class=\"stats-label\">次到访</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"stats-divider\"></view>\r\n\t\t\t\t<view class=\"stats-item\">\r\n\t\t\t\t\t<text class=\"stats-value\">{{formatDate(rec_date)}}</text>\r\n\t\t\t\t\t<text class=\"stats-label\">最近到访</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"stats-divider\"></view>\r\n\t\t\t\t<view class=\"stats-item\">\r\n\t\t\t\t\t<text class=\"stats-value\">{{rec_attraction}}</text>\r\n\t\t\t\t\t<text class=\"stats-label\">最新景点</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 地图区域 -->\r\n\t\t<view class=\"map-container\">\r\n\t\t\t<map class=\"track-map\" :latitude=\"selectedScenic.scenic_lat\" :longitude=\"selectedScenic.scenic_lng\"\r\n\t\t\t\t:scale=\"selectedScenic.scale\" :markers=\"markers\" :polyline=\"polylineStyle\" show-location=\"true\"\r\n\t\t\t\t@markertap=\"handleMarkerTap\">\r\n\t\t\t</map>\r\n\t\t\t\r\n\t\t\t<!-- 分享按钮 -->\r\n\t\t\t<view class=\"share-button\" @click=\"shareRoute\" v-if=\"markers.length > 0\">\r\n\t\t\t\t<uni-icons type=\"share\" size=\"20\" color=\"#ffffff\"></uni-icons>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<!-- 起止时间卡片 -->\r\n\t\t\t<view class=\"time-card\" v-if=\"markers.length > 0\">\r\n\t\t\t\t<view class=\"time-section\">\r\n\t\t\t\t\t<view class=\"time-icon\">\r\n\t\t\t\t\t\t<uni-icons type=\"clock-filled\" size=\"18\" color=\"#3bcb98\"></uni-icons>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"time-details\">\r\n\t\t\t\t\t\t<text class=\"time-label\">第一次</text>\r\n\t\t\t\t\t\t<text class=\"time-value\">{{getStartTime()}}</text>\r\n\t\t\t\t\t\t<text class=\"time-date\">{{getStartDate()}}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"time-divider\"></view>\r\n\t\t\t\t<view class=\"time-section\">\r\n\t\t\t\t\t<view class=\"time-icon\">\r\n\t\t\t\t\t\t<uni-icons type=\"clock-filled\" size=\"18\" color=\"#3bcb98\"></uni-icons>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"time-details\">\r\n\t\t\t\t\t\t<text class=\"time-label\">最近一次</text>\r\n\t\t\t\t\t\t<text class=\"time-value\">{{getEndTime()}}</text>\r\n\t\t\t\t\t\t<text class=\"time-date\">{{getEndDate()}}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 景点信息卡片 -->\r\n\t\t<view v-if=\"showInfo\" class=\"attraction-info-card\">\r\n\t\t\t<view class=\"attraction-header\">\r\n\t\t\t\t<image class=\"attraction-cover\" :src=\"selectedAttraction.image\" mode=\"aspectFill\"></image>\r\n\t\t\t\t<view class=\"attraction-profile\">\r\n\t\t\t\t\t<view class=\"attraction-name-row\">\r\n\t\t\t\t\t\t<text class=\"attraction-name\">{{ selectedAttraction.attraction_name }}</text>\r\n\t\t\t\t\t\t<uni-icons type=\"closeempty\" size=\"20\" color=\"#999\" @click=\"showInfo=false\"></uni-icons>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"rating\">\r\n\t\t\t\t\t\t<uni-icons type=\"star-filled\" size=\"14\" color=\"#ffc107\"></uni-icons>\r\n\t\t\t\t\t\t<text class=\"rating-value\">{{ selectedAttraction.rating || 4.5 }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"attraction-details\">\r\n\t\t\t\t<view class=\"detail-item\">\r\n\t\t\t\t\t<uni-icons type=\"calendar-filled\" size=\"16\" color=\"#3bcb98\"></uni-icons>\r\n\t\t\t\t\t<text class=\"detail-text\">游玩时间: {{ selectedMarker.check_in_time }}</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"detail-item\">\r\n\t\t\t\t\t<uni-icons type=\"location-filled\" size=\"16\" color=\"#3bcb98\"></uni-icons>\r\n\t\t\t\t\t<text class=\"detail-text\">{{ selectedAttraction.address }}</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"detail-item\" v-if=\"selectedAttraction.description\">\r\n\t\t\t\t\t<uni-icons type=\"info-filled\" size=\"16\" color=\"#3bcb98\"></uni-icons>\r\n\t\t\t\t\t<text class=\"detail-text description\">{{ selectedAttraction.description }}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"action-buttons\">\r\n\t\t\t\t<view class=\"action-button details\" @click=\"navto_detail(selectedAttraction.attraction_id)\">\r\n\t\t\t\t\t<text>查看详情</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"action-button navigate\" @click=\"navigateToNavigationPage(selectedAttraction)\">\r\n\t\t\t\t\t<uni-icons type=\"paperplane-filled\" size=\"16\" color=\"#ffffff\"></uni-icons>\r\n\t\t\t\t\t<text>导航前往</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 分享预览画布（隐藏） -->\r\n\t\t<canvas canvas-id=\"shareCanvas\" class=\"share-canvas\"></canvas>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport NavBar from \"../../components/NavBar.vue\";\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tNavBar\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tscenics: [],\r\n\t\t\t\tactiveScenicId: getApp().globalData.global_scenic_id,\r\n\t\t\t\t// 当前选中的景区  \r\n\t\t\t\tselectedScenic: null,\r\n\t\t\t\t// 标记点数据，可以基于选中的景区动态生成  \r\n\t\t\t\tmarkers: [],\r\n\t\t\t\t// 折线数据，如果需要的话也可以动态生成  \r\n\t\t\t\tpolyline: [],\r\n\t\t\t\tshowInfo: false, // 是否显示景点信息卡片\r\n\t\t\t\tselectedAttraction: {}, // 当前选中的景点信息\r\n\t\t\t\tselectedMarker: {},\r\n\t\t\t\trec_num: 0,\r\n\t\t\t\trec_date: null,\r\n\t\t\t\trec_attraction: \"\",\r\n\t\t\t\tpattern: {\r\n\t\t\t\t\tcolor: '#7A7E83',\r\n\t\t\t\t\tbackgroundColor: '#fff',\r\n\t\t\t\t\tselectedColor: '#007AFF',\r\n\t\t\t\t\tbuttonColor: '#007AFF',\r\n\t\t\t\t\ticonColor: '#fff'\r\n\t\t\t\t},\r\n\t\t\t\tcanvasWidth: 600, // 分享图宽度\r\n\t\t\t\tcanvasHeight: 900, // 分享图高度\r\n\t\t\t\tuserInfo: null, // 用户信息\r\n\t\t\t\tisLoggedIn: false, // 是否已登录\r\n\t\t\t\tnoFootprintMessage: '' // 无足迹信息提示\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tpolylineStyle() {\r\n\t\t\t\tif (!this.polyline || this.polyline.length === 0) return [];\r\n\t\t\t\t\r\n\t\t\t\treturn [{\r\n\t\t\t\t\t...this.polyline[0],\r\n\t\t\t\t\tcolor: '#333333',\r\n\t\t\t\t\twidth: 3,\r\n\t\t\t\t\tdottedLine: true,\r\n\t\t\t\t\tborderWidth: 1,\r\n\t\t\t\t\tborderColor: '#000000'\r\n\t\t\t\t}];\r\n\t\t\t},\r\n\t\t\tmarkersWithCallout() {\r\n\t\t\t\t// 对 markers 进行处理，为每个 marker 添加自定义的 callout\r\n\t\t\t\treturn this.markers.map(marker => ({\r\n\t\t\t\t\t...marker,\r\n\t\t\t\t\tcustomCallout: {\r\n\t\t\t\t\t\tdisplay: 'BYCLICK', // 气泡是否常显，'BYCLICK'表示点击时显示\r\n\t\t\t\t\t\ttextAlign: 'center',\r\n\t\t\t\t\t\tborderWidth: 1,\r\n\t\t\t\t\t\tborderColor: '#007AFF'\r\n\t\t\t\t\t},\r\n\t\t\t\t\tshowCallout: false\r\n\t\t\t\t}));\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.getScenics();\r\n\t\t\tthis.checkLoginStatus();\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\t// 每次页面显示时重新检查登录状态\r\n\t\t\t// 这确保了从其他页面退出登录后回到此页面时能正确更新\r\n\t\t\tconsole.log('历史足迹页面显示，重新检查登录状态');\r\n\t\t\tthis.checkLoginStatus();\r\n\t\t\t\r\n\t\t\t// 如果有选中的景区，重新获取足迹数据\r\n\t\t\tif (this.selectedScenic) {\r\n\t\t\t\tthis.updateMarkersAndPolylines();\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// 检查登录状态\r\n\t\t\tcheckLoginStatus() {\r\n\t\t\t\t// 先清除之前的数据\r\n\t\t\t\tthis.clearFootprintData();\r\n\t\t\t\t\r\n\t\t\t\t// 尝试从全局变量获取用户信息\r\n\t\t\t\tconst app = getApp();\r\n\t\t\t\tconsole.log('全局对象结构:', JSON.stringify(app.globalData));\r\n\t\t\t\t\r\n\t\t\t\tif (app.globalData && app.globalData.userInfo) {\r\n\t\t\t\t\tthis.userInfo = app.globalData.userInfo;\r\n\t\t\t\t\tthis.isLoggedIn = true;\r\n\t\t\t\t\tconsole.log('从全局变量获取到用户信息:', JSON.stringify(this.userInfo));\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// 如果全局变量中没有，尝试从本地存储获取\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst userInfoStr = uni.getStorageSync('userInfo');\r\n\t\t\t\t\tconsole.log('本地存储用户信息:', userInfoStr || '无');\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (userInfoStr) {\r\n\t\t\t\t\t\tthis.userInfo = JSON.parse(userInfoStr);\r\n\t\t\t\t\t\tthis.isLoggedIn = true;\r\n\t\t\t\t\t\tconsole.log('从本地存储获取到用户信息:', JSON.stringify(this.userInfo));\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// 同时更新全局变量\r\n\t\t\t\t\t\tif (app.globalData) {\r\n\t\t\t\t\t\t\tapp.globalData.userInfo = this.userInfo;\r\n\t\t\t\t\t\t\tconsole.log('已更新全局变量中的用户信息');\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tconsole.error('globalData未定义，无法更新全局用户信息');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.isLoggedIn = false;\r\n\t\t\t\t\t\tthis.userInfo = null;\r\n\t\t\t\t\t\tthis.showToastMessage('请先登录以查看您的足迹');\r\n\t\t\t\t\t\tconsole.log('未找到已登录的用户信息');\r\n\t\t\t\t\t\tthis.clearFootprintData();\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tconsole.error('获取用户信息失败', e);\r\n\t\t\t\t\tthis.isLoggedIn = false;\r\n\t\t\t\t\tthis.userInfo = null;\r\n\t\t\t\t\tthis.showToastMessage('获取用户信息失败');\r\n\t\t\t\t\tthis.clearFootprintData();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 显示提示信息\r\n\t\t\tshowToastMessage(message) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: message,\r\n\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\tduration: 2000\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 清除足迹数据的方法\r\n\t\t\tclearFootprintData() {\r\n\t\t\t\tthis.markers = [];\r\n\t\t\t\tthis.polyline = [];\r\n\t\t\t\tthis.rec_num = 0;\r\n\t\t\t\tthis.rec_date = null;\r\n\t\t\t\tthis.rec_attraction = \"暂无记录\";\r\n\t\t\t\tthis.showInfo = false;\r\n\t\t\t\tthis.selectedAttraction = {};\r\n\t\t\t\tthis.selectedMarker = {};\r\n\t\t\t},\r\n\t\t\t// 从后端获取景区数据\r\n\t\t\tgetScenics() {\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: 'http://localhost:8000/scenic',\r\n\t\t\t\t\tmethod: 'GET',\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tif (res.statusCode === 200) {\r\n\t\t\t\t\t\t\t// 将从后端获取的数据存储到attractions中\r\n\t\t\t\t\t\t\tthis.scenics = res.data;\r\n\t\t\t\t\t\t\tif (this.scenics.length > 0) {\r\n\t\t\t\t\t\t\t\tthis.selectedScenic = this.scenics[this.activeScenicId-1];\r\n\t\t\t\t\t\t\t\tthis.updateMarkersAndPolylines(); // 更新地图的标记点和折线\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tconsole.error('Failed to fetch scenics data');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\tconsole.error('Failed to fetch scenics data:', err);\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tsetActiveScenicId(id) {\r\n\t\t\t\tthis.activeScenicId = id;\r\n\t\t\t\tthis.selectScenic(id);\r\n\t\t\t},\r\n\t\t\t// 选择景区的方法  \r\n\t\t\tselectScenic(scenicId) {\r\n\t\t\t\tthis.selectedScenic = this.scenics.find(scenic => scenic.scenic_id === scenicId);\r\n\t\t\t\t// 根据选中的景区更新标记点和折线数据  \r\n\t\t\t\tthis.updateMarkersAndPolylines();\r\n\t\t\t},\r\n\t\t\tupdateMarkersAndPolylines() {\r\n\t\t\t\t// 清空已有数据\r\n\t\t\t\tthis.clearFootprintData();\r\n\t\t\t\t\r\n\t\t\t\t// 如果未登录，显示提示信息并返回\r\n\t\t\t\tif (!this.isLoggedIn || !this.userInfo) {\r\n\t\t\t\t\tthis.showToastMessage('请先登录以查看您的足迹');\r\n\t\t\t\t\tconsole.log('用户未登录，无法获取足迹');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// 如果景区信息不存在，显示提示并返回\r\n\t\t\t\tif (!this.selectedScenic || !this.selectedScenic.scenic_id) {\r\n\t\t\t\t\tconsole.error('景区信息不存在');\r\n\t\t\t\t\tthis.showToastMessage('无法获取景区信息');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconst scenic = this.selectedScenic.scenic_id;\r\n\t\t\t\t\r\n\t\t\t\t// 优先查找可能的用户ID字段\r\n\t\t\t\tlet userId = null;\r\n\t\t\t\tif (this.userInfo.id) {\r\n\t\t\t\t\tuserId = this.userInfo.id;\r\n\t\t\t\t} else if (this.userInfo.user_id) {\r\n\t\t\t\t\tuserId = this.userInfo.user_id;\r\n\t\t\t\t} else if (this.userInfo.userId) {\r\n\t\t\t\t\tuserId = this.userInfo.userId;\r\n\t\t\t\t} else if (this.userInfo.userid) {\r\n\t\t\t\t\tuserId = this.userInfo.userid;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconsole.log('用户信息:', JSON.stringify(this.userInfo));\r\n\t\t\t\tconsole.log('获取到的用户ID:', userId);\r\n\t\t\t\t\r\n\t\t\t\t// 如果无法获取用户ID，显示提示并尝试使用全局用户信息的id\r\n\t\t\t\tif (!userId && app.globalData && app.globalData.userInfo) {\r\n\t\t\t\t\tuserId = app.globalData.userInfo.id;\r\n\t\t\t\t\tconsole.log('尝试从全局变量直接获取ID:', userId);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// 如果还是无法获取ID，则显示错误信息\r\n\t\t\t\tif (!userId) {\r\n\t\t\t\t\tconsole.error('无法获取用户ID，请确保用户已正确登录');\r\n\t\t\t\t\tthis.showToastMessage('无法获取用户信息，请重新登录');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// 显示加载提示\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '加载足迹中...'\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t// 使用新的API接口获取指定用户和景区的足迹\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: `http://localhost:8000/api/footprint/user/${userId}/scenic/${scenic}/`,\r\n\t\t\t\t\tmethod: 'GET',\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t// 隐藏加载提示\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tthis.handleFootprintResponse(res);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: this.handleRequestFail\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tupdateRecNum(footprints) {\r\n\t\t\t\tconst uniqueDates = new Set(footprints.map(footprint => new Date(footprint.check_in_time)\r\n\t\t\t\t\t.toLocaleDateString()));\r\n\t\t\t\tthis.rec_num = uniqueDates.size;\r\n\t\t\t},\r\n\t\t\tupdateRecDateAndAttraction(sortedFootprints) {\r\n\t\t\t\tif (sortedFootprints.length === 0) {\r\n\t\t\t\t\tthis.rec_date = null;\r\n\t\t\t\t\tthis.rec_attraction = \"暂无记录\";\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tlet latest = sortedFootprints.length - 1;\r\n\t\t\t\tconst latestFootprint = sortedFootprints[latest];\r\n\t\t\t\tthis.rec_date = new Date(latestFootprint.check_in_time).toLocaleDateString();\r\n\t\t\t\tthis.rec_attraction = latestFootprint.attraction__attraction_name;\r\n\t\t\t},\r\n\t\t\tformatDate(date) {\r\n\t\t\t\tif (!date) return '暂无记录';\r\n\t\t\t\treturn new Date(date).toLocaleDateString();\r\n\t\t\t},\r\n\t\t\tgetStartTime() {\r\n\t\t\t\tif (!this.markers || this.markers.length === 0) return '08:00';\r\n\t\t\t\tconst firstMarker = this.markers[0];\r\n\t\t\t\tconst date = new Date(firstMarker.check_in_time);\r\n\t\t\t\treturn '08:00';\r\n\t\t\t},\r\n\t\t\tgetStartDate() {\r\n\t\t\t\tif (!this.markers || this.markers.length === 0) return '';\r\n\t\t\t\tconst firstMarker = this.markers[0];\r\n\t\t\t\tconst date = new Date(firstMarker.check_in_time);\r\n\t\t\t\treturn date.toLocaleDateString();\r\n\t\t\t},\r\n\t\t\tgetEndTime() {\r\n\t\t\t\tif (!this.markers || this.markers.length === 0) return '16:00';\r\n\t\t\t\tconst lastMarker = this.markers[this.markers.length - 1];\r\n\t\t\t\tconst date = new Date(lastMarker.check_in_time);\r\n\t\t\t\treturn '16:00';\r\n\t\t\t},\r\n\t\t\tgetEndDate() {\r\n\t\t\t\tif (!this.markers || this.markers.length === 0) return '';\r\n\t\t\t\tconst lastMarker = this.markers[this.markers.length - 1];\r\n\t\t\t\tconst date = new Date(lastMarker.check_in_time);\r\n\t\t\t\treturn date.toLocaleDateString();\r\n\t\t\t},\r\n\t\t\thandleMarkerTap(e) {\r\n\t\t\t\tconst markerId = e.markerId;\r\n\t\t\t\tthis.selectedMarker = this.markers.find(marker => marker.id === markerId);\r\n\t\t\t\tconst attractionId = this.selectedMarker.attraction_id;\r\n\t\t\t\tthis.showInfo = true;\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: `http://localhost:8000/attraction/${attractionId}`,\r\n\t\t\t\t\tmethod: 'GET',\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tif (res.statusCode === 200) {\r\n\t\t\t\t\t\t\t// 将从后端获取的数据存储到attractions中\r\n\t\t\t\t\t\t\tthis.selectedAttraction = res.data;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tconsole.error('Failed to fetch attraction data');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\tconsole.error('Failed to fetch attraction data:', err);\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tnavto_detail(attractionId) {\r\n\t\t\t\tconsole.log('Navigate to navigation page' + attractionId);\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: `/pages/detail/detail?attraction_id=${attractionId}`\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tnavigateToNavigationPage(attraction) {\r\n\t\t\t\t// 实现导航到导航页面的逻辑\r\n\t\t\t\tconsole.log('Navigate to navigation page', attraction);\r\n\t\t\t\t// 这里可以根据实际情况实现导航逻辑\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 分享路线功能\r\n\t\t\tshareRoute() {\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '生成分享图片中...'\r\n\t\t\t\t});\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.createShareImage();\r\n\t\t\t\t}, 300);\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 创建分享图片\r\n\t\t\tcreateShareImage() {\r\n\t\t\t\tconst ctx = uni.createCanvasContext('shareCanvas', this);\r\n\t\t\t\tconst width = this.canvasWidth;\r\n\t\t\t\tconst height = this.canvasHeight;\r\n\t\t\t\t\r\n\t\t\t\t// 绘制背景\r\n\t\t\t\tctx.fillStyle = '#ffffff';\r\n\t\t\t\tctx.fillRect(0, 0, width, height);\r\n\t\t\t\t\r\n\t\t\t\t// 绘制标题\r\n\t\t\t\tctx.fillStyle = '#333333';\r\n\t\t\t\tctx.font = 'normal bold 24px sans-serif';\r\n\t\t\t\tctx.textAlign = 'center';\r\n\t\t\t\tctx.fillText(`${this.selectedScenic.scenic_name}游览路线`, width / 2, 50);\r\n\t\t\t\t\r\n\t\t\t\t// 绘制日期\r\n\t\t\t\tctx.fillStyle = '#666666';\r\n\t\t\t\tctx.font = 'normal 16px sans-serif';\r\n\t\t\t\tctx.fillText(`行程日期: ${this.getStartDate()} - ${this.getEndDate()}`, width / 2, 80);\r\n\t\t\t\t\r\n\t\t\t\t// 创建地图静态图片URL（使用腾讯地图静态图API）\r\n\t\t\t\tconst center = `${this.selectedScenic.scenic_lat},${this.selectedScenic.scenic_lng}`;\r\n\t\t\t\tconst zoom = this.selectedScenic.scale;\r\n\t\t\t\tconst size = '500x500';\r\n\t\t\t\tconst markers = this.markers.map(m => `markers=color:red|size:mid|${m.latitude},${m.longitude}`).join('&');\r\n\t\t\t\tconst path = `path=color:0x3bcb98|weight:4|${this.polyline[0].points.map(p => `${p.latitude},${p.longitude}`).join('|')}`;\r\n\t\t\t\t\r\n\t\t\t\tconsole.log(\"center: \" + center);\r\n\t\t\t\tconsole.log(\"zoom: \" + zoom);\r\n\t\t\t\tconsole.log(\"size: \" + size);\r\n\t\t\t\tconsole.log(\"markers: \" + markers);\r\n\t\t\t\tconsole.log(\"path: \" + path);\r\n\r\n\t\t\t\t// 这里使用腾讯地图静态图API（需要替换为真实的key）\r\n\t\t\t\t// 注意：实际使用时需要申请腾讯地图API Key\r\n\t\t\t\tconst apiKey = 'LQ2BZ-J6V6A-GGPKJ-COKYU-FNMM3-MVFPN';\r\n\t\t\t\tconst mapImageUrl = `https://apis.map.qq.com/ws/staticmap/v2/?center=${center}&zoom=${zoom}&size=${size}&${markers}&${path}&key=${apiKey}`;\r\n\t\t\t\t\r\n\t\t\t\tconsole.log(\"mapImageUrl: \" + mapImageUrl);\r\n\r\n\t\t\t\t// 获取地图图片\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '获取地图中...'\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tuni.getImageInfo({\r\n\t\t\t\t\tsrc: mapImageUrl,\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t// 绘制地图\r\n\t\t\t\t\t\tctx.drawImage(res.path, 50, 100, 500, 500);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// 绘制行程统计\r\n\t\t\t\t\t\tthis.drawStatsBox(ctx, 50, 620, 500, 120);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// 绘制底部版权信息\r\n\t\t\t\t\t\tctx.fillStyle = '#999999';\r\n\t\t\t\t\t\tctx.font = 'normal 14px sans-serif';\r\n\t\t\t\t\t\tctx.textAlign = 'center';\r\n\t\t\t\t\t\tctx.fillText('我的旅行足迹 - 分享自景区导览App', width / 2, height - 30);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// 绘制到画布\r\n\t\t\t\t\t\tctx.draw(false, () => {\r\n\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\tthis.saveCanvasToImage();\r\n\t\t\t\t\t\t\t}, 300);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\tconsole.error('获取地图图片失败', err);\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// 获取失败时尝试使用备用地图\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '使用备用地图',\r\n\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\tduration: 1500\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// 使用备用地图图片\r\n\t\t\t\t\t\tconst backupMapPath = '/static/map_placeholder.png';\r\n\t\t\t\t\t\tuni.getImageInfo({\r\n\t\t\t\t\t\t\tsrc: backupMapPath,\r\n\t\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\t\t// 绘制备用地图\r\n\t\t\t\t\t\t\t\tctx.drawImage(res.path, 50, 100, 500, 500);\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t// 绘制行程统计\r\n\t\t\t\t\t\t\t\tthis.drawStatsBox(ctx, 50, 620, 500, 120);\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t// 绘制底部版权信息\r\n\t\t\t\t\t\t\t\tctx.fillStyle = '#999999';\r\n\t\t\t\t\t\t\t\tctx.font = 'normal 14px sans-serif';\r\n\t\t\t\t\t\t\t\tctx.textAlign = 'center';\r\n\t\t\t\t\t\t\t\tctx.fillText('我的旅行足迹 - 分享自景区导览App', width / 2, height - 30);\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t// 绘制到画布\r\n\t\t\t\t\t\t\t\tctx.draw(false, () => {\r\n\t\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\t\tthis.saveCanvasToImage();\r\n\t\t\t\t\t\t\t\t\t}, 300);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail: (err2) => {\r\n\t\t\t\t\t\t\t\tconsole.error('获取备用地图图片失败', err2);\r\n\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '生成分享图片失败',\r\n\t\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 绘制统计信息框\r\n\t\t\tdrawStatsBox(ctx, x, y, width, height) {\r\n\t\t\t\t// 绘制统计信息背景\r\n\t\t\t\tctx.fillStyle = '#f9f9f9';\r\n\t\t\t\tctx.strokeStyle = '#eeeeee';\r\n\t\t\t\tthis.roundRect(ctx, x, y, width, height, 10);\r\n\t\t\t\tctx.fill();\r\n\t\t\t\tctx.stroke();\r\n\t\t\t\t\r\n\t\t\t\t// 绘制标题\r\n\t\t\t\tctx.fillStyle = '#333333';\r\n\t\t\t\tctx.font = 'normal bold 18px sans-serif';\r\n\t\t\t\tctx.textAlign = 'left';\r\n\t\t\t\tctx.fillText('行程概览', x + 20, y + 30);\r\n\t\t\t\t\r\n\t\t\t\t// 绘制统计数据\r\n\t\t\t\tconst itemWidth = width / 3;\r\n\t\t\t\t\r\n\t\t\t\t// 到访次数\r\n\t\t\t\tctx.fillStyle = '#333333';\r\n\t\t\t\tctx.font = 'normal bold 22px sans-serif';\r\n\t\t\t\tctx.textAlign = 'center';\r\n\t\t\t\tctx.fillText(this.rec_num, x + itemWidth / 2, y + 70);\r\n\t\t\t\t\r\n\t\t\t\tctx.fillStyle = '#999999';\r\n\t\t\t\tctx.font = 'normal 14px sans-serif';\r\n\t\t\t\tctx.fillText('次到访', x + itemWidth / 2, y + 95);\r\n\t\t\t\t\r\n\t\t\t\t// 分隔线1\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.moveTo(x + itemWidth, y + 50);\r\n\t\t\t\tctx.lineTo(x + itemWidth, y + height - 30);\r\n\t\t\t\tctx.strokeStyle = '#eeeeee';\r\n\t\t\t\tctx.stroke();\r\n\t\t\t\t\r\n\t\t\t\t// 最近到访\r\n\t\t\t\tctx.fillStyle = '#333333';\r\n\t\t\t\tctx.font = 'normal bold 18px sans-serif';\r\n\t\t\t\tctx.textAlign = 'center';\r\n\t\t\t\tctx.fillText(this.formatDate(this.rec_date), x + itemWidth * 1.5, y + 70);\r\n\t\t\t\t\r\n\t\t\t\tctx.fillStyle = '#999999';\r\n\t\t\t\tctx.font = 'normal 14px sans-serif';\r\n\t\t\t\tctx.fillText('最近到访', x + itemWidth * 1.5, y + 95);\r\n\t\t\t\t\r\n\t\t\t\t// 分隔线2\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.moveTo(x + itemWidth * 2, y + 50);\r\n\t\t\t\tctx.lineTo(x + itemWidth * 2, y + height - 30);\r\n\t\t\t\tctx.strokeStyle = '#eeeeee';\r\n\t\t\t\tctx.stroke();\r\n\t\t\t\t\r\n\t\t\t\t// 最新景点\r\n\t\t\t\tctx.fillStyle = '#333333';\r\n\t\t\t\tctx.font = 'normal bold 16px sans-serif';\r\n\t\t\t\tctx.textAlign = 'center';\r\n\t\t\t\t// 如果文字太长，截取显示\r\n\t\t\t\tconst attractionName = this.rec_attraction.length > 8 ? \r\n\t\t\t\t\tthis.rec_attraction.substring(0, 7) + '...' : this.rec_attraction;\r\n\t\t\t\tctx.fillText(attractionName, x + itemWidth * 2.5, y + 70);\r\n\t\t\t\t\r\n\t\t\t\tctx.fillStyle = '#999999';\r\n\t\t\t\tctx.font = 'normal 14px sans-serif';\r\n\t\t\t\tctx.fillText('最新景点', x + itemWidth * 2.5, y + 95);\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 绘制圆角矩形\r\n\t\t\troundRect(ctx, x, y, width, height, radius) {\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.moveTo(x + radius, y);\r\n\t\t\t\tctx.lineTo(x + width - radius, y);\r\n\t\t\t\tctx.arcTo(x + width, y, x + width, y + radius, radius);\r\n\t\t\t\tctx.lineTo(x + width, y + height - radius);\r\n\t\t\t\tctx.arcTo(x + width, y + height, x + width - radius, y + height, radius);\r\n\t\t\t\tctx.lineTo(x + radius, y + height);\r\n\t\t\t\tctx.arcTo(x, y + height, x, y + height - radius, radius);\r\n\t\t\t\tctx.lineTo(x, y + radius);\r\n\t\t\t\tctx.arcTo(x, y, x + radius, y, radius);\r\n\t\t\t\tctx.closePath();\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 保存画布为图片并分享\r\n\t\t\tsaveCanvasToImage() {\r\n\t\t\t\tuni.canvasToTempFilePath({\r\n\t\t\t\t\tcanvasId: 'shareCanvas',\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t// 保存图片到相册\r\n\t\t\t\t\t\tuni.saveImageToPhotosAlbum({\r\n\t\t\t\t\t\t\tfilePath: res.tempFilePath,\r\n\t\t\t\t\t\t\tsuccess: () => {\r\n\t\t\t\t\t\t\t\tthis.openShareMenu(res.tempFilePath);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\t\t\tconsole.error('保存图片失败', err);\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '保存图片失败',\r\n\t\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tconsole.error('生成图片失败', err);\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '生成图片失败',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}, this);\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 打开分享菜单\r\n\t\t\topenShareMenu(imagePath) {\r\n\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\tuni.showShareImageMenu({\r\n\t\t\t\t\tpath: imagePath,\r\n\t\t\t\t\tsuccess: () => {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '分享成功',\r\n\t\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\tconsole.error('打开分享菜单失败', err);\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '请长按图片分享',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t// #endif\r\n\t\t\t\t\r\n\t\t\t\t// #ifndef MP-WEIXIN\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '分享成功',\r\n\t\t\t\t\tcontent: '图片已保存到相册，请到相册中查看并分享',\r\n\t\t\t\t\tshowCancel: false\r\n\t\t\t\t});\r\n\t\t\t\t// #endif\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 处理足迹数据响应\r\n\t\t\thandleFootprintResponse(res) {\r\n\t\t\t\tif (res.statusCode === 200) {\r\n\t\t\t\t\tconst footprints = res.data;\r\n\t\t\t\t\tconsole.log('获取到足迹数据:', footprints ? footprints.length : 0, '条');\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (footprints && footprints.length > 0) {\r\n\t\t\t\t\t\t// 更新标记点数据\r\n\t\t\t\t\t\tthis.markers = footprints.map(footprint => ({\r\n\t\t\t\t\t\t\tid: footprint.id,\r\n\t\t\t\t\t\t\tlongitude: footprint.attraction__attraction_lng,\r\n\t\t\t\t\t\t\tlatitude: footprint.attraction__attraction_lat,\r\n\t\t\t\t\t\t\tname: footprint.attraction__attraction_name,\r\n\t\t\t\t\t\t\tattraction_id: footprint.attraction__attraction_id,\r\n\t\t\t\t\t\t\tcheck_in_time: footprint.check_in_time.split('T')[0],\r\n\t\t\t\t\t\t\twidth: 25, // 设置标记宽度\r\n\t\t\t\t\t\t\theight: 35, // 设置标记高度\r\n\t\t\t\t\t\t\ticonPath: '/static/marker.png', // 自定义图标路径\r\n\t\t\t\t\t\t}));\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// 绘制路线轨迹\r\n\t\t\t\t\t\tconst sortedFootprints = [...footprints].sort(\r\n\t\t\t\t\t\t\t(a, b) => new Date(a.check_in_time) - new Date(b.check_in_time)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tconst points = sortedFootprints.map(footprint => ({\r\n\t\t\t\t\t\t\tlongitude: footprint.attraction__attraction_lng,\r\n\t\t\t\t\t\t\tlatitude: footprint.attraction__attraction_lat\r\n\t\t\t\t\t\t}));\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.polyline = [{\r\n\t\t\t\t\t\t\tpoints: points,\r\n\t\t\t\t\t\t\tcolor: \"#333333\",\r\n\t\t\t\t\t\t\tarrowLine: true,\r\n\t\t\t\t\t\t\twidth: 3,\r\n\t\t\t\t\t\t\tdottedLine: true\r\n\t\t\t\t\t\t}];\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// 更新 rec_num, rec_date 和 rec_attraction\r\n\t\t\t\t\t\tthis.updateRecNum(footprints);\r\n\t\t\t\t\t\tthis.updateRecDateAndAttraction(sortedFootprints);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// 清空无足迹提示\r\n\t\t\t\t\t\tthis.noFootprintMessage = '';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// 没有足迹数据\r\n\t\t\t\t\t\tthis.showToastMessage(`您在${this.selectedScenic.scenic_name}暂无历史足迹`);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// 请求失败\r\n\t\t\t\t\tconsole.error('获取足迹数据失败:', res);\r\n\t\t\t\t\tthis.showToastMessage('获取足迹数据失败');\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 处理请求失败\r\n\t\t\thandleRequestFail(err) {\r\n\t\t\t\t// 隐藏加载提示\r\n\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\r\n\t\t\t\tconsole.error('请求足迹数据失败:', err);\r\n\t\t\t\tthis.showToastMessage('网络请求失败，请检查网络');\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<style>\r\n\t.track-page {\r\n\t\tbackground-color: #f5f5f5;\r\n\t\tmin-height: 100vh;\r\n\t}\r\n\t\r\n\t/* 景区选择栏样式 */\r\n\t.scenic-tabs {\r\n\t\tdisplay: flex;\r\n\t\tpadding: 20rpx 20rpx 10rpx;\r\n\t\tbackground-color: #ffffff;\r\n\t}\r\n\t\r\n\t.scenic-tab {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tmargin-right: 30rpx;\r\n\t\tpadding: 10rpx 15rpx;\r\n\t\tborder-radius: 12rpx;\r\n\t\ttransition: all 0.3s;\r\n\t}\r\n\t\r\n\t.scenic-tab-active {\r\n\t\tbackground: rgba(59, 203, 152, 0.1);\r\n\t}\r\n\t\r\n\t.scenic-image-container {\r\n\t\twidth: 100rpx;\r\n\t\theight: 100rpx;\r\n\t\tborder-radius: 50%;\r\n\t\toverflow: hidden;\r\n\t\tborder: 3rpx solid transparent;\r\n\t\tmargin-bottom: 10rpx;\r\n\t}\r\n\t\r\n\t.scenic-tab-active .scenic-image-container {\r\n\t\tborder-color: #3bcb98;\r\n\t}\r\n\t\r\n\t.scenic-image {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tobject-fit: cover;\r\n\t}\r\n\t\r\n\t.scenic-name {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #666;\r\n\t\ttext-align: center;\r\n\t}\r\n\t\r\n\t.scenic-tab-active .scenic-name {\r\n\t\tcolor: #3bcb98;\r\n\t\tfont-weight: bold;\r\n\t}\r\n\t\r\n\t/* 行程统计卡片 */\r\n\t.stats-card {\r\n\t\tmargin: 20rpx;\r\n\t\tbackground-color: #ffffff;\r\n\t\tborder-radius: 20rpx;\r\n\t\tbox-shadow: 0 4rpx 10rpx rgba(0, 0, 0, 0.05);\r\n\t\tpadding: 30rpx;\r\n\t\toverflow: hidden;\r\n\t}\r\n\t\r\n\t.stats-header {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tmargin-bottom: 20rpx;\r\n\t}\r\n\t\r\n\t.stats-title {\r\n\t\tfont-size: 30rpx;\r\n\t\tfont-weight: bold;\r\n\t\tmargin-left: 10rpx;\r\n\t}\r\n\t\r\n\t.stats-content {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\tpadding: 10rpx 0;\r\n\t}\r\n\t\r\n\t.stats-item {\r\n\t\tflex: 1;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tpadding: 10rpx;\r\n\t}\r\n\t\r\n\t.stats-value {\r\n\t\tfont-size: 32rpx;\r\n\t\tfont-weight: bold;\r\n\t\tcolor: #333;\r\n\t\tmargin-bottom: 5rpx;\r\n\t\ttext-align: center;\r\n\t}\r\n\t\r\n\t.stats-label {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #999;\r\n\t}\r\n\t\r\n\t.stats-divider {\r\n\t\twidth: 2rpx;\r\n\t\theight: 60rpx;\r\n\t\tbackground-color: #f0f0f0;\r\n\t}\r\n\t\r\n\t/* 地图区域 */\r\n\t.map-container {\r\n\t\tmargin: 20rpx;\r\n\t\tborder-radius: 20rpx;\r\n\t\toverflow: hidden;\r\n\t\tposition: relative;\r\n\t\tbox-shadow: 0 4rpx 10rpx rgba(0, 0, 0, 0.05);\r\n\t}\r\n\t\r\n\t.track-map {\r\n\t\twidth: 100%;\r\n\t\theight: 650rpx;\r\n\t}\r\n\t\r\n\t/* 分享按钮 */\r\n\t.share-button {\r\n\t\tposition: absolute;\r\n\t\ttop: 20rpx;\r\n\t\tright: 20rpx;\r\n\t\twidth: 80rpx;\r\n\t\theight: 80rpx;\r\n\t\tborder-radius: 50%;\r\n\t\tbackground: linear-gradient(to right, #5ac7d1, #60e1c1);\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tbox-shadow: 0 4rpx 10rpx rgba(0, 0, 0, 0.1);\r\n\t\tz-index: 10;\r\n\t}\r\n\t\r\n\t/* 起止时间卡片 */\r\n\t.time-card {\r\n\t\tposition: absolute;\r\n\t\tbottom: 20rpx;\r\n\t\tleft: 20rpx;\r\n\t\tright: 20rpx;\r\n\t\tbackground-color: rgba(255, 255, 255, 0.9);\r\n\t\tborder-radius: 20rpx;\r\n\t\tpadding: 30rpx;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\tbox-shadow: 0 4rpx 10rpx rgba(0, 0, 0, 0.1);\r\n\t}\r\n\t\r\n\t.time-section {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tflex: 1;\r\n\t}\r\n\t\r\n\t.time-icon {\r\n\t\tmargin-right: 20rpx;\r\n\t}\r\n\t\r\n\t.time-details {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t}\r\n\t\r\n\t.time-label {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #999;\r\n\t\tmargin-bottom: 5rpx;\r\n\t}\r\n\t\r\n\t.time-value {\r\n\t\tfont-size: 30rpx;\r\n\t\tfont-weight: bold;\r\n\t}\r\n\t\r\n\t.time-date {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #999;\r\n\t}\r\n\t\r\n\t.time-divider {\r\n\t\twidth: 2rpx;\r\n\t\theight: 80rpx;\r\n\t\tbackground-color: #f0f0f0;\r\n\t\tmargin: 0 40rpx;\r\n\t}\r\n\t\r\n\t/* 景点信息卡片 */\r\n\t.attraction-info-card {\r\n\t\tmargin: 20rpx;\r\n\t\tbackground-color: #ffffff;\r\n\t\tborder-radius: 20rpx;\r\n\t\tbox-shadow: 0 4rpx 10rpx rgba(0, 0, 0, 0.05);\r\n\t\toverflow: hidden;\r\n\t}\r\n\t\r\n\t.attraction-header {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tpadding: 30rpx;\r\n\t\tborder-bottom: 1px solid #f5f5f5;\r\n\t}\r\n\t\r\n\t.attraction-cover {\r\n\t\twidth: 130rpx;\r\n\t\theight: 130rpx;\r\n\t\tborder-radius: 15rpx;\r\n\t\tobject-fit: cover;\r\n\t}\r\n\t\r\n\t.attraction-profile {\r\n\t\tflex: 1;\r\n\t\tmargin-left: 20rpx;\r\n\t}\r\n\t\r\n\t.attraction-name-row {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t}\r\n\t\r\n\t.attraction-name {\r\n\t\tfont-size: 34rpx;\r\n\t\tfont-weight: bold;\r\n\t\tcolor: #333;\r\n\t\tmargin-bottom: 10rpx;\r\n\t}\r\n\t\r\n\t.rating {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tmargin-top: 10rpx;\r\n\t}\r\n\t\r\n\t.rating-value {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #333;\r\n\t\tmargin-left: 10rpx;\r\n\t}\r\n\t\r\n\t.attraction-details {\r\n\t\tpadding: 20rpx 30rpx;\r\n\t}\r\n\t\r\n\t.detail-item {\r\n\t\tdisplay: flex;\r\n\t\tmargin-bottom: 15rpx;\r\n\t\talign-items: flex-start;\r\n\t}\r\n\t\r\n\t.detail-text {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #666;\r\n\t\tmargin-left: 15rpx;\r\n\t\tflex: 1;\r\n\t\tline-height: 1.5;\r\n\t}\r\n\t\r\n\t.description {\r\n\t\tdisplay: -webkit-box;\r\n\t\t-webkit-box-orient: vertical;\r\n\t\t-webkit-line-clamp: 2;\r\n\t\toverflow: hidden;\r\n\t}\r\n\t\r\n\t.action-buttons {\r\n\t\tdisplay: flex;\r\n\t\tpadding: 20rpx 30rpx 30rpx;\r\n\t\tborder-top: 1px solid #f5f5f5;\r\n\t}\r\n\t\r\n\t.action-button {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\theight: 80rpx;\r\n\t\tborder-radius: 40rpx;\r\n\t\tfont-size: 28rpx;\r\n\t}\r\n\t\r\n\t.action-button.details {\r\n\t\tflex: 1;\r\n\t\tbackground-color: rgba(59, 203, 152, 0.1);\r\n\t\tcolor: #3bcb98;\r\n\t\tmargin-right: 20rpx;\r\n\t}\r\n\t\r\n\t.action-button.navigate {\r\n\t\tflex: 1;\r\n\t\tbackground: linear-gradient(to right, #5ac7d1, #60e1c1);\r\n\t\tcolor: white;\r\n\t}\r\n\t\r\n\t.action-button.navigate text {\r\n\t\tmargin-left: 10rpx;\r\n\t}\r\n\t\r\n\t/* 分享画布 */\r\n\t.share-canvas {\r\n\t\tposition: fixed;\r\n\t\ttop: -9999px;\r\n\t\tleft: -9999px;\r\n\t\twidth: 600px; /* 分享图宽度 */\r\n\t\theight: 900px; /* 分享图高度 */\r\n\t}\r\n</style>\r\n","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./track.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./track.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1744710971587\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}