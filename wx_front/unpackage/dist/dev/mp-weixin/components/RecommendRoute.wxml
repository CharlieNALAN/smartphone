<view class="route-container"><swiper class="route-cards-swiper" circular="{{true}}" previous-margin="50rpx" next-margin="50rpx" data-event-opts="{{[['change',[['handleSwiperChange',['$event']]]]]}}" bindchange="__e"><block wx:for="{{$root.l0}}" wx:for-item="route" wx:for-index="index" wx:key="index"><swiper-item class="route-card-item"><view class="{{['route-card',(currentIndex===index)?'card-active':'']}}"><image class="route-image" src="http://localhost:8000/media/attraction_images雷峰夕照.jpeg" mode="aspectFill"></image><view class="route-card-content"><view class="route-tag">推荐路线</view><view class="route-name">{{route.$orig.route_name}}</view><view class="route-info-row"><view class="route-info"><uni-icons vue-id="{{'8398c104-1-'+index}}" type="flag" size="14" color="#ffc107" bind:__l="__l"></uni-icons><text>{{(route.$orig.custom_lists?route.g0:0)+" 个景点"}}</text></view><text class="route-duration">{{"约"+(route.$orig.duration||'2')+"小时"}}</text></view><view class="route-description-text">{{route.$orig.route_description||'暂无描述'}}</view><view data-event-opts="{{[['tap',[['showRouteDetail',['$0'],[[['routes','',index]]]]]]]}}" class="see-more-btn" bindtap="__e"><text>查看路线</text><uni-icons vue-id="{{'8398c104-2-'+index}}" type="right" size="14" color="#ffffff" bind:__l="__l"></uni-icons></view></view></view></swiper-item></block></swiper><block wx:if="{{showPopup}}"><view data-event-opts="{{[['tap',[['closePopup',['$event']]]]]}}" class="popup-mask" bindtap="__e"></view></block><view class="{{['popup-panel',(showPopup)?'popup-show':'']}}"><view class="panel-header"><text class="panel-title">{{currentRoute.route_name}}</text><uni-icons vue-id="8398c104-3" type="closeempty" size="24" color="#333" data-event-opts="{{[['^click',[['closePopup']]]]}}" bind:click="__e" bind:__l="__l"></uni-icons></view><scroll-view class="panel-content" scroll-y="{{true}}"><view class="route-description"><text>{{currentRoute.route_description}}</text></view><view class="attraction-list"><block wx:for="{{currentRoute.custom_lists}}" wx:for-item="attraction" wx:for-index="index" wx:key="index"><view class="attraction-item"><view class="attraction-index">{{index+1}}</view><image class="attraction-image" src="{{attraction.attraction.image}}" mode="aspectFill"></image><view class="attraction-info"><text class="attraction-name">{{attraction.attraction.attraction_name}}</text><view data-event-opts="{{[['tap',[['openMapNav',['$0'],[[['currentRoute.custom_lists','',index]]]]]]]}}" class="attraction-address" bindtap="__e"><uni-icons vue-id="{{'8398c104-4-'+index}}" type="location-filled" size="16" color="#3bcb98" bind:__l="__l"></uni-icons><text class="address-text">{{attraction.attraction.address||'暂无地址信息'}}</text></view></view><view data-event-opts="{{[['tap',[['openMapNav',['$0'],[[['currentRoute.custom_lists','',index]]]]]]]}}" class="nav-button" bindtap="__e"><uni-icons vue-id="{{'8398c104-5-'+index}}" type="paperplane-filled" size="16" color="#ffffff" bind:__l="__l"></uni-icons></view></view></block></view></scroll-view></view></view>